<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.haier.purchase.data.dao.purchase.ExchangeGoodsDao" >
  <resultMap id="BaseResultMap" type="com.haier.purchase.data.model.ExchangeGoods" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
   <id column="id" property="id" jdbcType="INTEGER" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="storeOrderCode" property="storeordercode" jdbcType="VARCHAR" />
    <result column="tradeItemId" property="tradeitemid" jdbcType="VARCHAR" />
    <result column="tradeId" property="tradeid" jdbcType="VARCHAR" />
    <result column="itemCode" property="itemcode" jdbcType="VARCHAR" />
    <result column="itemQuantity" property="itemquantity" jdbcType="INTEGER" />
    <result column="itemAmount" property="itemamount" jdbcType="DECIMAL" />
    <result column="orderCode" property="ordercode" jdbcType="VARCHAR" />
    <result column="storeCode" property="storecode" jdbcType="VARCHAR" />
    <result column="orderProductsCn" property="orderProductsCn" jdbcType="VARCHAR" />
    <result column="orderProductsCnNew" property="orderProductsCnNew" jdbcType="VARCHAR" />
    <result column="packageCode" property="packageCode" jdbcType="VARCHAR" />
    <result column="tmsOrderCode" property="tmsOrderCode" jdbcType="VARCHAR" />
    <result column="consignTime" property="consigntime" jdbcType="TIMESTAMP" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.haier.purchase.data.model.ExchangeGoods" extends="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="data" property="data" jdbcType="LONGVARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, status, storeOrderCode, tradeItemId, tradeId, itemCode, itemQuantity, itemAmount, 
    orderCode, storeCode, tmsOrderCode,packageCode,consignTime,orderProductsCn,orderProductsCnNew
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    data
  </sql>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from exchange_goods
    where id = #{id,jdbcType=INTEGER}
  </select>
  	<select id="findExchangeTable"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from exchange_goods
      where status != 2
	</select>

  <select id="findAll"
          resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from exchange_goods
    where 1=1
    <if test="storeordercode !=null and storeordercode !=''">
      <![CDATA[ and storeOrderCode LIKE CONCAT('%', #{storeordercode} ,'%') ]]>
    </if>
    <if test="itemcode !=null and itemcode !=''">
      <![CDATA[ and itemCode LIKE CONCAT('%', #{itemcode} ,'%') ]]>
    </if>
    order by id desc
    <if test="page!=null and rows!=null">
      limit ${page},${rows}
    </if>

  </select>

  <select id="findAllCount"
          resultType="int">
    select
    COUNT(1)
    from exchange_goods
    where 1=1
    <if test="storeordercode !=null and storeordercode !=''">
      <![CDATA[ and storeOrderCode LIKE CONCAT('%', #{storeordercode} ,'%') ]]>
    </if>
    <if test="itemcode !=null and itemcode !=''">
      <![CDATA[ and itemCode LIKE CONCAT('%', #{itemcode} ,'%') ]]>
    </if>

  </select>

	  	<select id="findMax" 
		resultType="String">
		select
		max(id)
		from exchange_goods
	</select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from exchange_goods
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.haier.purchase.data.model.ExchangeGoods" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into exchange_goods (id, status, storeOrderCode, 
      tradeItemId,packageCode,tmsOrderCode, data)
    values (#{id,jdbcType=INTEGER}, #{status,jdbcType=INTEGER}, #{storeordercode,jdbcType=VARCHAR}, 
      #{tradeitemid,jdbcType=VARCHAR},#{packageCode,jdbcType=VARCHAR},#{tmsOrderCode,jdbcType=VARCHAR}, #{data,jdbcType=LONGVARCHAR})
  </insert>
  
    <insert id="insertEx" parameterType="com.haier.purchase.data.model.ExchangeGoods" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
        insert into exchange_goods (id,storeOrderCode,
      tradeItemId, tradeId, itemCode, 
      itemQuantity, itemAmount, orderCode, 
      storeCode, consignTime,packageCode,tmsOrderCode, data
      )
    values 
        <foreach item="item" index="index" collection="list" separator=",">
            (#{item.id},#{item.storeordercode},
      #{item.tradeitemid}, #{item.tradeid}, #{item.itemcode}, 
      #{item.itemquantity}, #{item.itemamount}, #{item.ordercode}, 
      #{item.storecode}, #{item.consigntime}, #{item.packageCode,jdbcType=VARCHAR},#{item.tmsOrderCode,jdbcType=VARCHAR},#{item.data})
        </foreach>
  </insert>
  <insert id="insertSelective" parameterType="com.haier.purchase.data.model.ExchangeGoods" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into exchange_goods
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="storeordercode != null" >
        storeOrderCode,
      </if>
      <if test="tradeitemid != null" >
        tradeItemId,
      </if>
      <if test="data != null" >
        data,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="status != null" >
        #{status,jdbcType=INTEGER},
      </if>
      <if test="storeordercode != null" >
        #{storeordercode,jdbcType=VARCHAR},
      </if>
      <if test="tradeitemid != null" >
        #{tradeitemid,jdbcType=VARCHAR},
      </if>
      <if test="data != null" >
        #{data,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.haier.purchase.data.model.ExchangeGoods" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update exchange_goods
    <set >
      <if test="status != null" >
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="storeordercode != null" >
        storeOrderCode = #{storeordercode,jdbcType=VARCHAR},
      </if>
      <if test="tradeitemid != null" >
        tradeItemId = #{tradeitemid,jdbcType=VARCHAR},
      </if>
      <if test="data != null" >
        data = #{data,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.haier.purchase.data.model.ExchangeGoods" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update exchange_goods
    set status = #{status,jdbcType=INTEGER},
      storeOrderCode = #{storeordercode,jdbcType=VARCHAR},
      tradeItemId = #{tradeitemid,jdbcType=VARCHAR},
      data = #{data,jdbcType=LONGVARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.haier.purchase.data.model.ExchangeGoods" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update exchange_goods
    set status = 1, updateTime = now()
    where id = #{id,jdbcType=INTEGER}
  </update>
  
    <update id="updateExchange" parameterType="com.haier.purchase.data.model.ExchangeGoods" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update exchange_goods
    set status = 0
    where id = #{id,jdbcType=INTEGER}
  </update>

  <update id="updateWD" parameterType="com.haier.purchase.data.model.ExchangeGoods" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update exchange_goods
    set
    orderProductsCn = #{orderProductsCn,jdbcType=VARCHAR},
    orderProductsCnNew = #{orderProductsCnNew,jdbcType=VARCHAR},
    status = 2,
    updateTime = now()
    where id = #{id,jdbcType=INTEGER}
  </update>
</mapper>